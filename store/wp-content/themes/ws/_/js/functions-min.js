function goToByScroll(e){$("html,body").animate({scrollTop:$(e).offset().top-scrollOffset},2e3)}function goToByScrollResume(e){$("html,body").animate({scrollTop:$(e).offset().top-0},2e3)}function navToggle(){trim=$(window).height();if($("#header-small").hasClass("off")){$("#header-small").removeClass("off");$("#header-small").addClass("on");$("html").removeClass("header-closed");$("html").addClass("header-open");$("html").css("height",trim);$("body").css("height",trim)}else if($("#header-small").hasClass("on")){$("#header-small").removeClass("on");$("#header-small").addClass("off");$("html").removeClass("header-open");$("html").addClass("header-closed");$("#header").scrollTop(0);$("html").css("height","100%");$("body").css("height","100%")}}function view(){ch=$(window).height();cw=$(window).width();bh=ch-hh;bmsh=ch-hh-minSmallOffset;ffh=bh-60;fph=$(".flexslider-project").width();fph/=1.7777777778;$(".block.min").css("min-height",bh);$(".block.min-small").css("min-height",bmsh);$(".block.crop").css("height",bh);$("#homefix").css("height",ch);$(".flexslider-project .flex-viewport").css("height",fph);$(".flexslider-project.flexslider-loading").css("height",fph);$(".flexslider-project.flexslider-loaded").css("height","auto");$(".flexslider-project .description-slide").css("height",fph);$(".flexslider-project ul.slides").css("height",fph);if(!loaded){loadElements()}}function loadElements(){loaded=true;setTimeout(function(){$(".loading").addClass("loaded");view();doAjaxRequest()},1e3)}function modal(){}function spy(){var e=$("#resume-nav");var t=new Array;$("#resume-nav .jump-resume").each(function(e){t[e]=new Array(2);var n=$(this).attr("href");var r=$(n).offset();t[e][0]=$(this);t[e][1]=r.top});for(var n=0;n<t.length;n++){if($(window).scrollTop()+180>=t[n][1]){$("#resume-nav .jump-resume").removeClass("active");t[n][0].addClass("active");if(t[n][0].attr("href")=="#work"){}else{}}}}function doAjaxRequest(){$.ajax({type:"GET",url:"http://gregnemes.com/wp-admin/admin-ajax.php",dataType:"html",data:{action:"loadMore"},success:function(e){$("#container").html(e);isotopeSetup();doAjaxRequestContact()}})}function doAjaxRequestContact(){$.ajax({type:"GET",url:"http://gregnemes.com/wp-admin/admin-ajax.php",dataType:"html",data:{action:"loadContact"},success:function(e){$("#contact").html(e)}})}function isotopeSetup(){var e=$("#container");var t=$("#isotope-filters"),n=t.find("a.filter");e.isotope({masonry:{columnWidth:320}});$.Isotope.prototype._masonryResizeChanged=function(){return true};$.Isotope.prototype._masonryReset=function(){this.masonry={};this._getSegments();var e=this.masonry.cols;this.masonry.colYs=[];while(e--){this.masonry.colYs.push(0)}};n.click(function(r){if($("#header-small").hasClass("on")){navToggle()}r.preventDefault();var i=$(this);if(i.hasClass("hierarchical")){var s=i.data("sub-target");$(".sub-menu").addClass("hidden");$(s).removeClass("hidden")}else{if(!i.hasClass("sub-link")){$(".sub-menu").addClass("hidden")}}if(i.hasClass("selected")){return false}n.removeClass("selected");if(i.hasClass("small-project-link")){$("#project-link").addClass("selected")}else{i.addClass("selected")}var o={},u=t.attr("data-option-key"),a=i.attr("data-option-value");a=a==="false"?false:a;o[u]=a;if(u==="layoutMode"&&typeof changeLayoutMode==="function"){changeLayoutMode(i,o)}else{e.isotope(o,function(){pos=e.offset();$("body,html").animate({scrollTop:pos.top-100},700)})}return false})}var hh=44;var scrollOffset=44;var minSmallOffset=240;var cw,ch,bh,dh;var loaded=false;$(window).load(function(){$(window).scrollTop(0);$(".flexslider-full").flexslider({animation:"slide",directionNav:false});var e=$(".flexslider-project");e.flexslider({animation:"slide",controlNav:"true",directionNav:false,start:function(t){e.removeClass("flexslider-loading").addClass("flexslider-loaded")}})});jQuery(document).ready(function(e){view();spy();e(".flexslider-project .flex-previous").click(function(t){t.preventDefault();e(".flexslider-project").flexslider("prev")});e(".flexslider-project .description-start").click(function(t){t.preventDefault();e(".flexslider-project").flexslider("next")});e(".flexslider-project .flex-next").click(function(t){t.preventDefault();e(".flexslider-project").flexslider("next")});e(".flexslider-full .flex-previous").click(function(t){t.preventDefault();e(".flexslider-full").flexslider("prev")});e(".flexslider-full .flex-next").click(function(t){t.preventDefault();e(".flexslider-full").flexslider("next")});e("#backtotop").click(function(t){t.preventDefault();e("body,html").animate({scrollTop:0},2e3)});e("#nav-toggle").click(function(e){e.preventDefault();navToggle()});e("#header-small").click(function(){navToggle()});e(".big-menu").click(function(e){e.preventDefault();navToggle()});e(".header-open #header").click(function(){console.log("clicked");navToggle()});e(document).keypress(function(e){if(e.which==109||e.which==77){navToggle()}});e(".jump").click(function(t){t.preventDefault();var n=e(this).attr("href");n=n.toLowerCase();goToByScroll(n)});e(".jump-resume").click(function(t){t.preventDefault();var n=e(this).attr("href");n=n.toLowerCase();goToByScrollResume(n)})});$(window).ready(function(){});$(window).resize(function(){view();spy()});$(window).scroll(function(){var e=$("#container").offset().top-200;var t=$("#container").offset().top-$(window).height()-300;var n=$("#container").offset().top-$(window).height()/2;view();spy();if($(this).scrollTop()>=e&&$("body").hasClass("before")){$("body").removeClass("before").addClass("after");$("#nav .off").removeClass("off").addClass("on");$("#footer").removeClass("hidden")}else if($(this).scrollTop()<e&&$("body").hasClass("after")){$("body").removeClass("after").addClass("before");$("#nav .on").removeClass("on").addClass("off");$("#footer").addClass("hidden")}if($(this).scrollTop()>=t&&!$(".fixed-nav").hasClass("hidden")){$(".fixed-nav").addClass("hidden")}else if($(this).scrollTop()<t&&$(".fixed-nav").hasClass("hidden")){$(".fixed-nav").removeClass("hidden")}})